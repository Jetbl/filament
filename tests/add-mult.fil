extern component Mult<G>(
  @within(G, G+1) left: 32,
  @within(G, G+1) right: 32,
  @exact(G, G+1) go: 1
) -> (
  @within(G+3, G+4) out: 32,
  @exact(G+3, G+4) valid: 1
);

extern component Add<G>(
  @within(G, G+1) left: 32,
  @within(G, G+1) right: 32,
  @exact(G, G+1) go: 1
) -> (
  @within(G+2, G+3) out: 32,
  @exact(G+2, G+3) valid: 1
);

component main<G>() -> () {
  cells {
    A: Add;
    M: Mult;
  }

  // Immediately use the value generated by the adder in the multiplier.
  a0 = A<G>(10, 20);
  m0 = M<G+2>(a0.out, a0.out);
}
