\newif\ifdraft\drafttrue
\newcount\draft\draft=1

\ifdraft
\overfullrule=1mm
\fi

%%%%%%%%%%%%%%%% ACM settings %%%%%%%%%%%%%%%%%%%


\usepackage{xcolor}
\usepackage{xcolor-solarized}
\usepackage{booktabs}
\usepackage{rotating}
\usepackage{lscape}
\usepackage{pdflscape}
\usepackage{subcaption}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{hyperref}
\usepackage{cleveref}
\usepackage{xspace}
\usepackage{mathtools}
\usepackage{listings}
\usepackage{tikz}
\usepackage{wrapfig}
\usepackage{graphicx}
\usetikzlibrary{arrows}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{shapes.multipart}
\usepackage{balance}
\usepackage{etoolbox}
\usepackage{relsize}
\usepackage[scale=0.85]{sourcecodepro}  % A nicer code font.
\usepackage{supertabular}
\usepackage{microtype}
\usepackage{textcomp}
\usepackage{mathpartir}
%\usepackage[skip=2pt]{caption}  % SPACE HACK
%\usepackage{titlesec}
\usepackage{xxx}

% OTT alt requirements
\usepackage{ottalt}
\inputott{semantics/types}

% Colors
\definecolor{light-gray}{gray}{0.95}
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{unpred-color}{rgb}{0, 0.45, 0.69}
\definecolor{pred-color}{rgb}{0.87, 0.56, 0.19}
\definecolor{incorrect-color}{rgb}{0, 0.61, 0.45}
\definecolor{light-gray}{gray}{0.95}
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{unpred-color}{rgb}{0, 0.45, 0.69}
\definecolor{pred-color}{rgb}{0.87, 0.56, 0.19}
\definecolor{incorrect-color}{rgb}{0, 0.61, 0.45}

%
\frenchspacing

% Symbols for tables
\usepackage{pifont}
\newcommand{\cmark}{\ding{51}}
\newcommand{\xmark}{\ding{55}}
\newcommand{\incorrect}{\textcolor{incorrect-color}{\ding{53}}}
\newcommand{\pred}{\textcolor{pred-color}{\ding{116}}}
\newcommand{\unpred}{\textcolor{unpred-color}{\ding{108}}}

\def\UrlBreaks{\do\/\do-\do.}

\hypersetup{hidelinks=true}

% Inline code shortcut.
\newcommand{\code}{\lstinline[language=]}

% Typesetting for benchmark names.
\newcommand{\bench}{\textsf}

\renewcommand{\paragraph}[1]{\noindentparagraph{#1.}}

% Reference configuration
\crefname{section}{Section}{Sections}
\Crefname{section}{Section}{Sections}
\crefformat{section}{Section~#2#1#3}
\crefname{figure}{Figure}{Figures}
\crefformat{figure}{Figure~#2#1#3}
\Crefname{Figure}{Figure}{Figures}
\newcommand{\crefrangeconjunction}{--}

\newcommand{\figsize}{\footnotesize}

\newtoggle{infig}
\togglefalse{infig}
\AtBeginEnvironment{figure}{\toggletrue{infig}}
\AtEndEnvironment{figure}{\togglefalse{infig}}
\AtBeginEnvironment{figure*}{\toggletrue{infig}}
\AtEndEnvironment{figure*}{\togglefalse{infig}}

% Change style for listing inside a figure
\AtBeginEnvironment{lstlisting}{
  \iftoggle{infig}{
    \lstset{style=figurestyle,numbers=none}
  }{
    \lstset{style=normalstyle,numbers=none}}}

% Nicer typesetting for C++.
% https://tex.stackexchange.com/a/4304
% \newcommand{\cxx}{C\nolinebreak\hspace{-.05em}\raisebox{.2ex}{\small +}\nolinebreak\hspace{-.02em}\raisebox{.2ex}{\small +}\xspace}
\newcommand{\cxx}{C++\xspace}

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
  \node[shape=circle,draw,inner sep=1pt] (char) {#1};}}

% =============== Paper specific setup ======================

% Listings setup
\lstdefinelanguage{fuse}{
  sensitive=false,
  keywords={if, else, let,combine,decl,unroll,for,while,float,double,bit,ubit,mem,bank,view,split,by,shrink,shift,suffix},
  comment=[l]{//},
}

\lstdefinelanguage{mrxl}{
  sensitive=false,
  keywords={map, reduce, input},
  comment=[l]{//},
}

\lstdefinelanguage{futil}{
  keywords={else, import, if, while, par, seq, prim, wires, cells, group, with, control, component, ->, go, done, ?, primitive, verilog, external},
  keywordstyle=\color{darkgray}\bfseries,
  alsoletter=/->,
  sensitive=false,
  comment=[l]{//},
}

\DisableLigatures[f]{encoding = *, family = tt*}
\lstset{%
    basicstyle=\linespread{1.1}\ttfamily,
    backgroundcolor=\color{light-gray},
    frame=tlbr,
    framesep=0.1cm,
    framerule=0pt,
    aboveskip=0.8\medskipamount,
    belowskip=0.5\medskipamount,
    keywordstyle=\bfseries,
    commentstyle=\color{gray},
    basicstyle=\ttfamily, % the size of the fonts that are used for the code
    breakatwhitespace=false, % sets if automatic breaks should only happen at whitespace
    breaklines=true, % sets automatic line breaking
    captionpos=b, % sets the caption-position to bottom
    language=futil, % the language of the code
    numbers=none, % where to put the line-numbers; possible values are (none, left, right)
    tabsize=2, % sets default tabsize to 2 spaces
    mathescape=true, % allow $x$ in listings
    upquote=true,
    xrightmargin=0.1cm,
    xleftmargin=0.1cm,
}
\lstdefinestyle{figurestyle}{
  basicstyle=\footnotesize\ttfamily,
  numbers=left,
  numberstyle=\footnotesize\sffamily,
  numbersep=0.7em,
  stepnumber=1,
  firstnumber=1,
  %xleftmargin=1em
}
\lstdefinestyle{normalstyle}{
  basicstyle=\footnotesize\ttfamily,
  numbers=none
}

%%%%
%%% Code macros
%%%
\newcommand{\hlCode}[1]{{\color{red}{#1}}}
